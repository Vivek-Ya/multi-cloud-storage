{"ast":null,"code":"var _jsxFileName = \"/Users/vivek/Desktop/multi-cloud-storage/frontend/src/context/CloudContext.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useState, useContext, useEffect } from 'react';\nimport cloudService from '../services/cloudService';\nimport { useAuth } from './AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CloudContext = /*#__PURE__*/createContext(null);\nexport const CloudProvider = ({\n  children\n}) => {\n  _s();\n  const [cloudAccounts, setCloudAccounts] = useState([]);\n  const [files, setFiles] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [selectedAccount, setSelectedAccount] = useState(null);\n  const {\n    user\n  } = useAuth();\n  useEffect(() => {\n    if (user) {\n      fetchCloudAccounts();\n    }\n  }, [user]);\n  const fetchCloudAccounts = async () => {\n    try {\n      setLoading(true);\n      const accounts = await cloudService.getCloudAccounts();\n      setCloudAccounts(accounts);\n\n      // Auto-select first account if available\n      if (accounts.length > 0 && !selectedAccount) {\n        setSelectedAccount(accounts[0]);\n        fetchFiles(accounts[0].id);\n      }\n    } catch (error) {\n      console.error('Error fetching cloud accounts:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const fetchFiles = async accountId => {\n    try {\n      setLoading(true);\n      const fileList = await cloudService.getFiles(accountId);\n      setFiles(fileList);\n    } catch (error) {\n      console.error('Error fetching files:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const uploadFile = async (accountId, file, onProgress) => {\n    try {\n      setLoading(true);\n      const uploadedFile = await cloudService.uploadFile(accountId, file, onProgress);\n\n      // Refresh files\n      await fetchFiles(accountId);\n      return uploadedFile;\n    } catch (error) {\n      console.error('Error uploading file:', error);\n      throw error;\n    } finally {\n      setLoading(false);\n    }\n  };\n  const downloadFile = async (fileId, fileName) => {\n    try {\n      setLoading(true);\n      await cloudService.downloadFile(fileId, fileName);\n    } catch (error) {\n      console.error('Error downloading file:', error);\n      throw error;\n    } finally {\n      setLoading(false);\n    }\n  };\n  const deleteFile = async fileId => {\n    try {\n      setLoading(true);\n      await cloudService.deleteFile(fileId);\n\n      // Refresh files\n      if (selectedAccount) {\n        await fetchFiles(selectedAccount.id);\n      }\n    } catch (error) {\n      console.error('Error deleting file:', error);\n      throw error;\n    } finally {\n      setLoading(false);\n    }\n  };\n  const renameFile = async (fileId, newName) => {\n    try {\n      setLoading(true);\n      await cloudService.renameFile(fileId, newName);\n\n      // Refresh files\n      if (selectedAccount) {\n        await fetchFiles(selectedAccount.id);\n      }\n    } catch (error) {\n      console.error('Error renaming file:', error);\n      throw error;\n    } finally {\n      setLoading(false);\n    }\n  };\n  const connectGoogleDrive = () => {\n    cloudService.connectGoogleDrive(user === null || user === void 0 ? void 0 : user.username);\n  };\n  const connectOneDrive = () => {\n    cloudService.connectOneDrive(user === null || user === void 0 ? void 0 : user.username);\n  };\n  return /*#__PURE__*/_jsxDEV(CloudContext.Provider, {\n    value: {\n      cloudAccounts,\n      files,\n      loading,\n      selectedAccount,\n      setSelectedAccount,\n      fetchCloudAccounts,\n      fetchFiles,\n      uploadFile,\n      downloadFile,\n      deleteFile,\n      renameFile,\n      connectGoogleDrive,\n      connectOneDrive\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 122,\n    columnNumber: 5\n  }, this);\n};\n_s(CloudProvider, \"hPkMNBG8lXC69CHqxJ5YKe6oUPo=\", false, function () {\n  return [useAuth];\n});\n_c = CloudProvider;\nexport const useCloud = () => {\n  _s2();\n  const context = useContext(CloudContext);\n  if (!context) {\n    throw new Error('useCloud must be used within a CloudProvider');\n  }\n  return context;\n};\n_s2(useCloud, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nvar _c;\n$RefreshReg$(_c, \"CloudProvider\");","map":{"version":3,"names":["React","createContext","useState","useContext","useEffect","cloudService","useAuth","jsxDEV","_jsxDEV","CloudContext","CloudProvider","children","_s","cloudAccounts","setCloudAccounts","files","setFiles","loading","setLoading","selectedAccount","setSelectedAccount","user","fetchCloudAccounts","accounts","getCloudAccounts","length","fetchFiles","id","error","console","accountId","fileList","getFiles","uploadFile","file","onProgress","uploadedFile","downloadFile","fileId","fileName","deleteFile","renameFile","newName","connectGoogleDrive","username","connectOneDrive","Provider","value","_jsxFileName","lineNumber","columnNumber","_c","useCloud","_s2","context","Error","$RefreshReg$"],"sources":["/Users/vivek/Desktop/multi-cloud-storage/frontend/src/context/CloudContext.jsx"],"sourcesContent":["import React, { createContext, useState, useContext, useEffect } from 'react';\nimport cloudService from '../services/cloudService';\nimport { useAuth } from './AuthContext';\n\nconst CloudContext = createContext(null);\n\nexport const CloudProvider = ({ children }) => {\n  const [cloudAccounts, setCloudAccounts] = useState([]);\n  const [files, setFiles] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [selectedAccount, setSelectedAccount] = useState(null);\n  const { user } = useAuth();\n\n  useEffect(() => {\n    if (user) {\n      fetchCloudAccounts();\n    }\n  }, [user]);\n\n  const fetchCloudAccounts = async () => {\n    try {\n      setLoading(true);\n      const accounts = await cloudService.getCloudAccounts();\n      setCloudAccounts(accounts);\n      \n      // Auto-select first account if available\n      if (accounts.length > 0 && !selectedAccount) {\n        setSelectedAccount(accounts[0]);\n        fetchFiles(accounts[0].id);\n      }\n    } catch (error) {\n      console.error('Error fetching cloud accounts:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchFiles = async (accountId) => {\n    try {\n      setLoading(true);\n      const fileList = await cloudService.getFiles(accountId);\n      setFiles(fileList);\n    } catch (error) {\n      console.error('Error fetching files:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const uploadFile = async (accountId, file, onProgress) => {\n    try {\n      setLoading(true);\n      const uploadedFile = await cloudService.uploadFile(accountId, file, onProgress);\n      \n      // Refresh files\n      await fetchFiles(accountId);\n      \n      return uploadedFile;\n    } catch (error) {\n      console.error('Error uploading file:', error);\n      throw error;\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const downloadFile = async (fileId, fileName) => {\n    try {\n      setLoading(true);\n      await cloudService.downloadFile(fileId, fileName);\n    } catch (error) {\n      console.error('Error downloading file:', error);\n      throw error;\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const deleteFile = async (fileId) => {\n    try {\n      setLoading(true);\n      await cloudService.deleteFile(fileId);\n      \n      // Refresh files\n      if (selectedAccount) {\n        await fetchFiles(selectedAccount.id);\n      }\n    } catch (error) {\n      console.error('Error deleting file:', error);\n      throw error;\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const renameFile = async (fileId, newName) => {\n    try {\n      setLoading(true);\n      await cloudService.renameFile(fileId, newName);\n      \n      // Refresh files\n      if (selectedAccount) {\n        await fetchFiles(selectedAccount.id);\n      }\n    } catch (error) {\n      console.error('Error renaming file:', error);\n      throw error;\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const connectGoogleDrive = () => {\n    cloudService.connectGoogleDrive(user?.username);\n  };\n\n  const connectOneDrive = () => {\n    cloudService.connectOneDrive(user?.username);\n  };\n\n  return (\n    <CloudContext.Provider\n      value={{\n        cloudAccounts,\n        files,\n        loading,\n        selectedAccount,\n        setSelectedAccount,\n        fetchCloudAccounts,\n        fetchFiles,\n        uploadFile,\n        downloadFile,\n        deleteFile,\n        renameFile,\n        connectGoogleDrive,\n        connectOneDrive,\n      }}\n    >\n      {children}\n    </CloudContext.Provider>\n  );\n};\n\nexport const useCloud = () => {\n  const context = useContext(CloudContext);\n  if (!context) {\n    throw new Error('useCloud must be used within a CloudProvider');\n  }\n  return context;\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}