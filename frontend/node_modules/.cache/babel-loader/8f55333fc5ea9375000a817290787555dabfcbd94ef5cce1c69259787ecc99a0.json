{"ast":null,"code":"var _jsxFileName = \"/Users/vivek/Desktop/multi-cloud-storage/frontend/src/context/CloudContext.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useState, useContext, useEffect } from 'react';\nimport cloudService from '../services/cloudService';\nimport { useAuth } from './AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CloudContext = /*#__PURE__*/createContext(null);\nexport const CloudProvider = ({\n  children\n}) => {\n  _s();\n  const [cloudAccounts, setCloudAccounts] = useState([]);\n  const [files, setFiles] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [selectedAccount, setSelectedAccount] = useState(null);\n  const {\n    user\n  } = useAuth();\n  useEffect(() => {\n    if (user) {\n      fetchCloudAccounts();\n    }\n  }, [user]);\n  const fetchCloudAccounts = async () => {\n    try {\n      setLoading(true);\n      const accounts = await cloudService.getCloudAccounts();\n      setCloudAccounts(accounts);\n\n      // Auto-select first account if available\n      if (accounts.length > 0 && !selectedAccount) {\n        setSelectedAccount(accounts[0]);\n        fetchFiles(accounts[0].id);\n      }\n    } catch (error) {\n      console.error('Error fetching cloud accounts:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const fetchFiles = async accountId => {\n    try {\n      setLoading(true);\n      const fileList = await cloudService.getFiles(accountId);\n      setFiles(fileList);\n    } catch (error) {\n      console.error('Error fetching files:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const uploadFile = async (accountId, file) => {\n    try {\n      setLoading(true);\n      const uploadedFile = await cloudService.uploadFile(accountId, file);\n\n      // Refresh files\n      await fetchFiles(accountId);\n      return uploadedFile;\n    } catch (error) {\n      console.error('Error uploading file:', error);\n      throw error;\n    } finally {\n      setLoading(false);\n    }\n  };\n  const connectGoogleDrive = () => {\n    cloudService.connectGoogleDrive();\n  };\n  return /*#__PURE__*/_jsxDEV(CloudContext.Provider, {\n    value: {\n      cloudAccounts,\n      files,\n      loading,\n      selectedAccount,\n      setSelectedAccount,\n      fetchCloudAccounts,\n      fetchFiles,\n      uploadFile,\n      connectGoogleDrive\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n};\n_s(CloudProvider, \"hPkMNBG8lXC69CHqxJ5YKe6oUPo=\", false, function () {\n  return [useAuth];\n});\n_c = CloudProvider;\nexport const useCloud = () => {\n  _s2();\n  const context = useContext(CloudContext);\n  if (!context) {\n    throw new Error('useCloud must be used within a CloudProvider');\n  }\n  return context;\n};\n_s2(useCloud, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nvar _c;\n$RefreshReg$(_c, \"CloudProvider\");","map":{"version":3,"names":["React","createContext","useState","useContext","useEffect","cloudService","useAuth","jsxDEV","_jsxDEV","CloudContext","CloudProvider","children","_s","cloudAccounts","setCloudAccounts","files","setFiles","loading","setLoading","selectedAccount","setSelectedAccount","user","fetchCloudAccounts","accounts","getCloudAccounts","length","fetchFiles","id","error","console","accountId","fileList","getFiles","uploadFile","file","uploadedFile","connectGoogleDrive","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useCloud","_s2","context","Error","$RefreshReg$"],"sources":["/Users/vivek/Desktop/multi-cloud-storage/frontend/src/context/CloudContext.jsx"],"sourcesContent":["import React, { createContext, useState, useContext, useEffect } from 'react';\nimport cloudService from '../services/cloudService';\nimport { useAuth } from './AuthContext';\n\nconst CloudContext = createContext(null);\n\nexport const CloudProvider = ({ children }) => {\n  const [cloudAccounts, setCloudAccounts] = useState([]);\n  const [files, setFiles] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [selectedAccount, setSelectedAccount] = useState(null);\n  const { user } = useAuth();\n\n  useEffect(() => {\n    if (user) {\n      fetchCloudAccounts();\n    }\n  }, [user]);\n\n  const fetchCloudAccounts = async () => {\n    try {\n      setLoading(true);\n      const accounts = await cloudService.getCloudAccounts();\n      setCloudAccounts(accounts);\n      \n      // Auto-select first account if available\n      if (accounts.length > 0 && !selectedAccount) {\n        setSelectedAccount(accounts[0]);\n        fetchFiles(accounts[0].id);\n      }\n    } catch (error) {\n      console.error('Error fetching cloud accounts:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchFiles = async (accountId) => {\n    try {\n      setLoading(true);\n      const fileList = await cloudService.getFiles(accountId);\n      setFiles(fileList);\n    } catch (error) {\n      console.error('Error fetching files:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const uploadFile = async (accountId, file) => {\n    try {\n      setLoading(true);\n      const uploadedFile = await cloudService.uploadFile(accountId, file);\n      \n      // Refresh files\n      await fetchFiles(accountId);\n      \n      return uploadedFile;\n    } catch (error) {\n      console.error('Error uploading file:', error);\n      throw error;\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const connectGoogleDrive = () => {\n    cloudService.connectGoogleDrive();\n  };\n\n  return (\n    <CloudContext.Provider\n      value={{\n        cloudAccounts,\n        files,\n        loading,\n        selectedAccount,\n        setSelectedAccount,\n        fetchCloudAccounts,\n        fetchFiles,\n        uploadFile,\n        connectGoogleDrive,\n      }}\n    >\n      {children}\n    </CloudContext.Provider>\n  );\n};\n\nexport const useCloud = () => {\n  const context = useContext(CloudContext);\n  if (!context) {\n    throw new Error('useCloud must be used within a CloudProvider');\n  }\n  return context;\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}